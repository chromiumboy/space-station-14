using Content.Shared.Conduit.Holder;
using Content.Shared.Conduit.Tagger;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Disposal.Tagger;

/// <summary>
/// Client-side UI used to control a disposal tagger.
/// </summary>
[GenerateTypedNameReferences]
public sealed partial class DisposalTaggerWindow : DefaultWindow
{
    [Dependency] private IEntityManager _entManager = default!;

    private readonly SharedConduitHolderSystem _conduitHolder;

    public DisposalTaggerWindow()
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);

        _conduitHolder = _entManager.System<SharedConduitHolderSystem>();

        TagInput.IsValid = tag => _conduitHolder.TagIsValid(tag);
    }

    public void UpdateState(ConduitTaggerUserInterfaceState state)
    {
        TagInput.Text = state.Tags;
    }
}

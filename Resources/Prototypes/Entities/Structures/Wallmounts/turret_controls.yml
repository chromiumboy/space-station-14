- type: entity
  id: WeaponEnergyTurretControlPanelFrame
  name: automated defense control system assembly
  description: An incomplete assembly for an automated defense control system.
  categories: [ HideSpawnMenu ]
  components:
  
  # Sprites and appearance
  - type: Sprite
    noRot: false
    drawdepth: SmallObjects
    sprite: Structures/Wallmounts/turret_controls.rsi
    layers:
    - state: base

  # Destruction
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallic
  - type: Destructible
    thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 200
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
      - trigger:
          !type:DamageTrigger
          damage: 100
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
          - !type:PlaySoundBehavior
            sound:
              collection: MetalGlassBreak
              params:
                volume: -4
  
  # General properties
  - type: Transform
    anchored: true
  - type: WallMount
  - type: Clickable
  - type: InteractionOutline
  - type: ContainerFill
    containers:
      board: [ ]
  - type: ContainerContainer
    containers:
      board: !type:Container
  - type: Construction
    graph: WeaponEnergyTurretControlPanel
    node: frame
  placement:
    mode: SnapgridCenter
    snap:
    - Wallmount
    
- type: entity
  parent: WeaponEnergyTurretControlPanelFrame
  id: WeaponEnergyTurretStationControlPanel
  name: automated defense control system
  description: An interface for remotely configuring the operational parameters of linked automated defense turrets.
  components:
  
  # Sprites and appearance
  - type: Appearance
  - type: Sprite
    noRot: false
    drawdepth: SmallObjects
    sprite: Structures/Wallmounts/turret_controls.rsi
    layers:
    - state: base
    - state: safe
      map: ["enum.PowerDeviceVisualLayers.Powered"]
      shader: unshaded
  - type: GenericVisualizer
    visuals:
      enum.WiresVisualLayers.MaintenancePanel:
        enum.WiresVisualLayers.MaintenancePanel:
          True: { visible: true }
          False: { visible: false }
      enum.PowerDeviceVisuals.Powered:
        enum.PowerDeviceVisualLayers.Powered:
          True: { visible: true }
          False: { visible: false }
      enum.TurretControllerVisuals.ControlPanel:
        enum.PowerDeviceVisualLayers.Powered:
          -1: { state: safe }
          0: { state: stun }
          1: { state: lethal }
          
  # Faction / control
  - type: StationAiWhitelist
  - type: AccessReader
    access: [["Command"], ["Security"]]
    
  # Turret related
  - type: TurretTargetSettings
  - type: DeployableTurretController
    accessGroups:
    - Cargo
    - Command
    - Engineering
    - General
    - Medical
    - Research
    - Security
    - Service
    - Silicon
    accessLevels:
    - Armory
    - Atmospherics
    - Bar
    - BasicSilicon
    - Borg
    - Brig
    - Detective
    - Captain
    - Cargo
    - Chapel
    - Chemistry
    - ChiefEngineer
    - ChiefMedicalOfficer
    - Command
    - Engineering
    - External
    - HeadOfPersonnel
    - HeadOfSecurity
    - Hydroponics
    - Janitor
    - Kitchen
    - Lawyer
    - Maintenance
    - Medical
    - Quartermaster
    - Research
    - ResearchDirector
    - Salvage
    - Security
    - Service
    - Theatre
    
  # Device network
  - type: DeviceList
  - type: DeviceNetwork
    deviceNetId: Wired
    receiveFrequencyId: TurretControl
    transmitFrequencyId: TurretControl
    prefix: device-address-prefix-console
    sendBroadcastAttemptEvent: true
  - type: DeviceNetworkRequiresPower
  - type: WiredNetworkConnection

  # UI
  - type: ActivatableUI 
    key: enum.DeployableTurretControllerUiKey.Key  
  - type: ActivatableUIRequiresPower
  - type: UserInterface
    interfaces:
      enum.DeployableTurretControllerUiKey.Key:
        type: TurretControllerWindowBoundUserInterface
      enum.WiresUiKey.Key:
        type: WiresBoundUserInterface
        
  # Wires
  - type: WiresPanel
  - type: Wires
    boardName: wires-board-name-turret-controls
    layoutId: TurretControls
  - type: Lock
    locked: true
    unlockOnClick: false
  - type: LockedWiresPanel
  
  # General properties
  - type: ApcPowerReceiver
  - type: ExtensionCableReceiver
  - type: Electrified
    enabled: false
    usesApcPower: true
  - type: ContainerFill
    containers:
      board: [ WeaponEnergyTurretStationControlPanelElectronics ]

- type: entity
  parent: WeaponEnergyTurretStationControlPanel
  id: WeaponEnergyTurretAIControlPanel
  name: AI automated defense control system
  description: An interface that allows a local artifical intelligence to adjust the operational parameters of linked automated defense turrets.
  components:
  - type: AccessReader
    access: [["StationAi"]]
  - type: ContainerFill
    containers:
      board: [ WeaponEnergyTurretAIControlPanelElectronics ]
  - type: TurretTargetSettings
    exemptAccessLevels:
    - Borg
  - type: DeployableTurretController
    accessGroups:
    - Silicon
    accessLevels:
    - BasicSilicon
    - Borg